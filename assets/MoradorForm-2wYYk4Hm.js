import{v as T,r as c,A as D,q as F,j as e}from"./index-LZNP7tki.js";import{p as O}from"./InputMask-CK0AgtKw.js";import{s as h}from"./MoradorService-BzWkpyU9.js";import{B as R,A as P}from"./BlocoService-CmrOoeTA.js";import{T as n}from"./TipoMoradorEnum-PsNxfakq.js";const S={FUNDAMENTAL_INCOMPLETO:{value:1,label:"Ensino Fundamental Incompleto"},FUNDAMENTAL_COMPLETO:{value:2,label:"Ensino Fundamental Completo"},MEDIO_INCOMPLETO:{value:3,label:"Ensino M�dio Incompleto"},MEDIO_COMPLETO:{value:4,label:"Ensino M�dio Completo"},SUPERIOR_INCOMPLETO:{value:5,label:"Ensino Superior Incompleto"},SUPERIOR_COMPLETO:{value:6,label:"Ensino Superior Completo"},POS_GRADUACAO:{value:7,label:"P�s-Gradua��o"},MESTRADO:{value:8,label:"Mestrado"},DOUTORADO:{value:9,label:"Doutorado"}},I={SOLTEIRO:{value:1,label:"Solteiro(a)"},CASADO:{value:2,label:"Casado(a)"},DIVORCIADO:{value:3,label:"Divorciado(a)"},VIUVO:{value:4,label:"Vi�vo(a)"},UNIAO_ESTAVEL:{value:5,label:"Uni�o Est�vel"}},_={PAI:{value:1,label:"Pai"},MAE:{value:2,label:"M�e"},FILHO:{value:3,label:"Filho(a)"},OUTRO:{value:4,label:"Outro"}};class w{constructor(m="",a="",l=n,r="",v="",p=I,N="",f=_,x=S,b=1,j="",M="",g=new Date,C="",A=1,E=1){this.Id=m,this.nome=a,this.tipoMorador=l,this.telefone=r,this.email=v,this.estadoCivil=p,this.profissao=N,this.parentesco=f,this.escolaridade=x,this.idMorador=b,this.rg=j,this.cpf=M,this.dataNascimento=g,this.observacao=C,this.idApartamento=A,this.idBloco=E}}const k=()=>{const{moradorId:i}=T(),m=c.useContext(D),[a,l]=c.useState(new w),[r,v]=c.useState({});c.useState(!1);const[p,N]=c.useState([]),[f,x]=c.useState([]),[b,j]=c.useState([]),M=F(),g=()=>{M(`/Veiculo/NovoCadastro/${i}`)};c.useEffect(()=>{async function o(){const s=await R.listarBloco(),t=await P.listarApartamento(),d=await h.listarMoradores();N(s),j(t),x(d)}if(o(),i){async function s(){try{const t=await h.lerMorador(i);t.dataNascimento&&(t.dataNascimento=new Date(t.dataNascimento),t.idMorador=14),l(t)}catch(t){console.error("Erro ao buscar morador:",t)}}s()}},[i]),a.tipoMorador===n.TITULAR.value&&(a.parentesco=0);const C=async o=>{o.preventDefault();const s={Id:a.id,nome:a.nome,tipoMorador:a.tipoMorador,telefone:a.telefone,email:a.email,estadoCivil:a.estadoCivil,profissao:a.profissao,parentesco:a.parentesco,escolaridade:a.escolaridade,idMorador:a.idMorador,rg:a.rg,cpf:a.cpf,dataNascimento:a.dataNascimento?a.dataNascimento.toISOString():"",observacao:a.observacao,idApartamento:a.idApartamento,idBloco:a.idBloco};v({});const t=A(s);if(Object.keys(t).length>0){v(t);return}try{if(i){const d=await h.atualizarMorador(i,s);m.addAlert("A��o Realizada com sucesso","success")}else{const d=await h.criarMorador(s);m.addAlert("A��o Realizada com sucesso","success"),E()}}catch(d){console.error("Erro ao criar morador:",d)}},A=o=>{const s={};return o.nome===""&&(s.nome='O campo "Nome" � obrigat�rio.'),a.tipoMorador!=n.TITULAR.value&&a.parentesco===0&&(s.parentesco='O campo "parentesco" � obrigat�rio para moradores diferentes do tipo "Titular".'),a.tipoMorador!=n.TITULAR.value&&a.idMorador===0&&(s.idMorador='O campo "Morador" � obrigat�rio para moradores diferentes do tipo "Titular".'),s},E=()=>{l(morador)},u=o=>Object.keys(o).map(s=>e.jsx("option",{value:o[s].value,children:o[s].label},o[s].value));return e.jsxs("div",{className:"container",children:[e.jsx("h2",{children:"Criar Morador"}),i!==void 0&&e.jsx("button",{onClick:g,className:"btn btn-primary mt-3 mb-3",children:"Adicionar Veiculo"}),e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{className:"col-2",children:[e.jsx("label",{className:"form-label",children:"id"}),e.jsx("span",{id:"id",className:"form-control",children:a.id??0})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-4",children:[e.jsx("label",{htmlFor:"nome",className:"form-label",children:"Nome"}),e.jsx("input",{type:"text",className:`form-control ${r.nome?"is-invalid":""}`,id:"nome",value:a.nome,onChange:o=>l({...a,nome:o.target.value})}),r.nome&&e.jsx("div",{className:"invalid-feedback",children:r.nome})]}),e.jsxs("div",{className:"col-2",children:[e.jsx("label",{htmlFor:"dataNascimento",className:"form-label",children:"Data de Nascimento"}),e.jsx("input",{type:"date",id:"dataNascimento",name:"dataNascimento",value:a.dataNascimento?a.dataNascimento.toISOString().substring(0,10):"",onChange:o=>l({...a,dataNascimento:new Date(o.target.value)}),className:r.dataNascimento?"form-control is-invalid":"form-control"})]}),e.jsxs("div",{className:"col-2",children:[e.jsx("label",{htmlFor:"telefone",className:"form-label",children:"Telefone"}),e.jsx(O,{mask:"(__) _____-____",replacement:{_:/\d/},className:"form-control",id:"telefone",value:a.telefone,onChange:o=>l({...a,telefone:o.target.value})})]}),e.jsxs("div",{className:"col-4",children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Email"}),e.jsx("input",{type:"email",className:"form-control",id:"email",value:a.email,onChange:o=>l({...a,email:o.target.value})})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-4",children:[e.jsx("label",{htmlFor:"escolaridade",className:"form-label",children:"Escolaridade"}),e.jsxs("select",{className:"form-select",id:"escolaridade",value:a.escolaridade,onChange:o=>l({...a,escolaridade:parseInt(o.target.value)}),children:[e.jsx("option",{value:0,children:"Selecione"}),u(S)]})]}),e.jsxs("div",{className:"col-2",children:[e.jsx("label",{htmlFor:"rg",className:"form-label",children:"RG"}),e.jsx("input",{type:"text",className:"form-control",id:"rg",value:a.rg,onChange:o=>setRg(o.target.value)})]}),e.jsxs("div",{className:"col-3",children:[e.jsx("label",{htmlFor:"cpf",className:"form-label",children:"CPF"}),e.jsx(O,{mask:"___.___.___-__",replacement:{_:/\d/},className:"form-control",id:"cpf",value:a.cpf,onChange:o=>setCpf(o.target.value)})]}),e.jsxs("div",{className:"col-3",children:[e.jsx("label",{htmlFor:"estadoCivil",className:"form-label",children:"Estado Civil"}),e.jsxs("select",{className:"form-select",id:"estadoCivil",value:a.estadoCivil,onChange:o=>setEstadoCivil(parseInt(o.target.value)),children:[e.jsx("option",{value:0,children:"Selecione"}),u(I)]})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-3",children:[e.jsx("label",{htmlFor:"profissao",className:"form-label",children:"Profiss�o"}),e.jsx("input",{type:"text",className:"form-control",id:"profissao",value:a.profissao,onChange:o=>setProfissao(o.target.value)})]}),e.jsxs("div",{className:"col-2",children:[e.jsx("label",{htmlFor:"idBloco",required:!0,className:"form-label",children:"Bloco"}),e.jsxs("select",{className:"form-select",id:"idBloco",value:a.idBloco,onChange:o=>l({...a,idBloco:parseInt(o.target.value)}),children:[e.jsx("option",{value:0,children:"Selecione"}),p.map(o=>e.jsx("option",{value:o.id,children:o.nome},o.id))]})]}),e.jsxs("div",{className:"col-2",children:[e.jsx("label",{htmlFor:"idApartamento",required:!0,className:"form-label",children:"Apartamento"}),e.jsxs("select",{className:"form-select",id:"idApartamento",value:a.idApartamento,onChange:o=>l({...a,idApartamento:parseInt(o.target.value)}),children:[e.jsx("option",{value:0,children:"Selecione"}),b.map(o=>e.jsx("option",{value:o.id,children:o.nome},o.id))]})]}),e.jsxs("div",{className:"col-2",children:[e.jsx("label",{htmlFor:"tipoMorador",required:!0,className:"form-label",children:"Tipo de Morador"}),e.jsxs("select",{className:"form-select",id:"tipoMorador",value:a.tipoMorador,onChange:o=>l({...a,tipoMorador:parseInt(o.target.value)}),children:[e.jsx("option",{value:0,children:"Selecione"}),u(n)]})]}),e.jsxs("div",{className:"col-3",children:[e.jsx("label",{htmlFor:"parentesco",className:"form-label",children:"Parentesco"}),e.jsxs("select",{className:`form-select ${r.parentesco?"is-invalid":""}`,id:"parentesco",value:a.parentesco,onChange:o=>l({...a,parentesco:parseInt(o.target.value)}),disabled:a.tipoMorador===n.TITULAR.value,children:[e.jsx("option",{value:0,children:"Selecione"}),u(_)]}),r.parentesco&&e.jsx("div",{className:"invalid-feedback",children:r.parentesco})]})]}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-3",children:[e.jsx("label",{htmlFor:"moradorId",className:"form-label",children:"Morador"}),e.jsxs("select",{className:`form-select ${r.idMorador?"is-invalid":""}`,id:"morador",value:a.idMorador,onChange:o=>l({...a,idMorador:parseInt(o.target.value)}),disabled:a.tipoMorador===n.TITULAR.value,children:[e.jsx("option",{value:0,children:"Selecione"}),f.map(o=>e.jsx("option",{value:o.id,children:o.nome},o.id))]}),r.idMorador&&e.jsx("div",{className:"invalid-feedback",children:r.idMorador})]})}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12",children:[e.jsx("label",{htmlFor:"observacao",className:"form-label",children:"Observa��o"}),e.jsx("textarea",{className:"form-control",rows:"5",id:"observacao",value:a.observacao,onChange:o=>setObservacao(o.target.value)})]})}),e.jsx("button",{type:"submit",className:"btn btn-primary mt-3",children:"Salvar"})]})]})};export{k as default};
