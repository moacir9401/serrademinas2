import{q as S,r as n,A as T,p as _,j as a}from"./index-Baw52cgS.js";import{p as E}from"./InputMask-D__sfL1O.js";import{s as p}from"./MoradorService-Ddrmdc0G.js";import{B as R,A as D}from"./BlocoService-DNm1RMcC.js";import{T as c}from"./TipoMoradorEnum-PsNxfakq.js";const F={FUNDAMENTAL_INCOMPLETO:{value:1,label:"Ensino Fundamental Incompleto"},FUNDAMENTAL_COMPLETO:{value:2,label:"Ensino Fundamental Completo"},MEDIO_INCOMPLETO:{value:3,label:"Ensino Médio Incompleto"},MEDIO_COMPLETO:{value:4,label:"Ensino Médio Completo"},SUPERIOR_INCOMPLETO:{value:5,label:"Ensino Superior Incompleto"},SUPERIOR_COMPLETO:{value:6,label:"Ensino Superior Completo"},POS_GRADUACAO:{value:7,label:"Pós-Graduação"},MESTRADO:{value:8,label:"Mestrado"},DOUTORADO:{value:9,label:"Doutorado"}},P={SOLTEIRO:{value:1,label:"Solteiro(a)"},CASADO:{value:2,label:"Casado(a)"},DIVORCIADO:{value:3,label:"Divorciado(a)"},VIUVO:{value:4,label:"Viúvo(a)"},UNIAO_ESTAVEL:{value:5,label:"União Estável"}},I={PAI:{value:1,label:"Pai"},MAE:{value:2,label:"Mãe"},FILHO:{value:3,label:"Filho(a)"},FILHA:{value:4,label:"Filha"},IRMAO:{value:5,label:"Irmão"},IRMA:{value:6,label:"Irmã"},TIO:{value:7,label:"Tio"},TIA:{value:8,label:"Tia"},AVO:{value:9,label:"Avô"},AVOA:{value:10,label:"Avó"},SOBRINHO:{value:11,label:"Sobrinho(a)"},PRIMO:{value:12,label:"Primo(a)"},NETO:{value:13,label:"Neto(a)"},GENRO:{value:14,label:"Genro"},NORA:{value:15,label:"Nora"},PADRASTO:{value:16,label:"Padrasto"},MADRASTA:{value:17,label:"Madrasta"},COMPANHEIRO:{value:18,label:"Companheiro(a)"},AMIGO:{value:19,label:"Amigo(a)"},OUTRO:{value:20,label:"Outro"},NaoPossui:{value:21,label:"Não Possui"}};class L{constructor(m="",e="",l=null,r="",u="",h=null,N="",b=null,f=null,x=1,j="",M="",A=new Date,O="",g=1,C=1){this.Id=m,this.nome=e,this.tipoMorador=l,this.telefone=r,this.email=u,this.estadoCivil=h,this.profissao=N,this.parentesco=b,this.escolaridade=f,this.idMorador=x,this.rg=j,this.cpf=M,this.dataNascimento=A,this.observacao=O,this.idApartamento=g,this.idBloco=C}}const k=()=>{const{moradorId:t}=S(),m=n.useContext(T),[e,l]=n.useState(new L),[r,u]=n.useState({});n.useState(!1);const[h,N]=n.useState([]),[b,f]=n.useState([]),[x,j]=n.useState([]),M=_(),A=()=>{M(`/Veiculo/NovoCadastro/${t}`)};n.useEffect(()=>{async function o(){const s=await R.listarBloco(),i=await D.listarApartamento(),d=await p.listarMoradores();N(s),j(i),f(d)}if(o(),t){async function s(){try{const i=await p.lerMorador(t);i.dataNascimento&&(i.dataNascimento=new Date(i.dataNascimento)),l(i)}catch(i){console.error("Erro ao buscar morador:",i)}}s()}},[t]),e.tipoMorador===c.TITULAR.value&&(e.parentesco=0);const O=async o=>{o.preventDefault();const s={Id:e.id,nome:e.nome,tipoMorador:e.tipoMorador,telefone:e.telefone,email:e.email,estadoCivil:e.estadoCivil,profissao:e.profissao,parentesco:e.parentesco,escolaridade:e.escolaridade,idMorador:e.idMorador,rg:e.rg,cpf:e.cpf,dataNascimento:e.dataNascimento?e.dataNascimento.toISOString():"",observacao:e.observacao,idApartamento:e.idApartamento,idBloco:e.idBloco};u({});const i=g(s);if(Object.keys(i).length>0){u(i);return}try{if(t){const d=await p.atualizarMorador(t,s);m.addAlert("Ação Realizada com sucesso","success")}else{const d=await p.criarMorador(s);m.addAlert("Ação Realizada com sucesso","success"),C()}}catch(d){console.error("Erro ao criar morador:",d)}},g=o=>{const s={};return o.nome===""&&(s.nome='O campo "Nome" é obrigatório.'),e.tipoMorador===null&&(s.tipoMorador='O campo "Tipo Morador" é obrigatório".'),e.tipoMorador!=c.TITULAR.value&&e.parentesco===0&&(s.parentesco='O campo "parentesco" é obrigatório para moradores diferentes do tipo "Titular".'),e.tipoMorador!=c.TITULAR.value&&e.parentesco!=I.NaoPossui.value&&e.idMorador===0&&(s.idMorador='O campo "Morador" é obrigatório para moradores diferentes do tipo "Titular".'),s},C=()=>{l(morador)},v=o=>Object.keys(o).map(s=>a.jsx("option",{value:o[s].value,children:o[s].label},o[s].value));return a.jsxs("div",{className:"container",children:[a.jsx("h2",{children:"Criar Morador"}),t!==void 0&&a.jsx("button",{onClick:A,className:"btn btn-primary mt-3 mb-3",children:"Adicionar Veiculo"}),a.jsxs("form",{onSubmit:O,children:[a.jsxs("div",{className:"col-2",children:[a.jsx("label",{className:"form-label",children:"id"}),a.jsx("span",{id:"id",className:"form-control",children:e.id??0})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-4",children:[a.jsx("label",{htmlFor:"nome",className:"form-label",children:"Nome"}),a.jsx("input",{type:"text",className:`form-control ${r.nome?"is-invalid":""}`,id:"nome",value:e.nome,onChange:o=>l({...e,nome:o.target.value})}),r.nome&&a.jsx("div",{className:"invalid-feedback",children:r.nome})]}),a.jsxs("div",{className:"col-2",children:[a.jsx("label",{htmlFor:"dataNascimento",className:"form-label",children:"Data de Nascimento"}),a.jsx("input",{type:"date",id:"dataNascimento",name:"dataNascimento",value:e.dataNascimento?e.dataNascimento.toISOString().substring(0,10):"",onChange:o=>l({...e,dataNascimento:new Date(o.target.value)}),className:r.dataNascimento?"form-control is-invalid":"form-control"})]}),a.jsxs("div",{className:"col-2",children:[a.jsx("label",{htmlFor:"telefone",className:"form-label",children:"Telefone"}),a.jsx(E,{mask:"(__) _____-____",replacement:{_:/\d/},className:"form-control",id:"telefone",value:e.telefone,onChange:o=>l({...e,telefone:o.target.value})})]}),a.jsxs("div",{className:"col-4",children:[a.jsx("label",{htmlFor:"email",className:"form-label",children:"Email"}),a.jsx("input",{type:"email",className:"form-control",id:"email",value:e.email,onChange:o=>l({...e,email:o.target.value})})]})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-4",children:[a.jsx("label",{htmlFor:"escolaridade",className:"form-label",children:"Escolaridade"}),a.jsxs("select",{className:"form-select",id:"escolaridade",value:e.escolaridade,onChange:o=>l({...e,escolaridade:parseInt(o.target.value)}),children:[a.jsx("option",{value:null,children:"Selecione"}),v(F)]})]}),a.jsxs("div",{className:"col-2",children:[a.jsx("label",{htmlFor:"rg",className:"form-label",children:"RG"}),a.jsx("input",{type:"text",className:"form-control",id:"rg",value:e.rg,onChange:o=>l({...e,rg:o.target.value})})]}),a.jsxs("div",{className:"col-3",children:[a.jsx("label",{htmlFor:"cpf",className:"form-label",children:"CPF"}),a.jsx(E,{mask:"___.___.___-__",replacement:{_:/\d/},className:"form-control",id:"cpf",value:e.cpf,onChange:o=>l({...e,cpf:o.target.value})})]}),a.jsxs("div",{className:"col-3",children:[a.jsx("label",{htmlFor:"estadoCivil",className:"form-label",children:"Estado Civil"}),a.jsxs("select",{className:"form-select",id:"estadoCivil",value:e.estadoCivil,onChange:o=>l({...e,estadoCivil:parseInt(o.target.value)}),children:[a.jsx("option",{value:null,children:"Selecione"}),v(P)]})]})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-3",children:[a.jsx("label",{htmlFor:"profissao",className:"form-label",children:"Profissão"}),a.jsx("input",{type:"text",className:"form-control",id:"profissao",value:e.profissao,onChange:o=>l({...e,profissao:o.target.value})})]}),a.jsxs("div",{className:"col-2",children:[a.jsx("label",{htmlFor:"idBloco",required:!0,className:"form-label",children:"Bloco"}),a.jsxs("select",{className:"form-select",id:"idBloco",value:e.idBloco,onChange:o=>l({...e,idBloco:parseInt(o.target.value)}),children:[a.jsx("option",{value:null,children:"Selecione"}),h.map(o=>a.jsx("option",{value:o.id,children:o.nome},o.id))]})]}),a.jsxs("div",{className:"col-2",children:[a.jsx("label",{htmlFor:"idApartamento",required:!0,className:"form-label",children:"Apartamento"}),a.jsxs("select",{className:"form-select",id:"idApartamento",value:e.idApartamento,onChange:o=>l({...e,idApartamento:parseInt(o.target.value)}),children:[a.jsx("option",{value:null,children:"Selecione"}),x.map(o=>a.jsx("option",{value:o.id,children:o.nome},o.id))]})]}),a.jsxs("div",{className:"col-2",children:[a.jsx("label",{htmlFor:"tipoMorador",required:!0,className:"form-label",children:"Tipo de Morador"}),a.jsxs("select",{className:`form-select  ${r.tipoMorador?"is-invalid":""}`,id:"tipoMorador",value:e.tipoMorador,onChange:o=>l({...e,tipoMorador:parseInt(o.target.value)}),children:[a.jsx("option",{value:null,children:"Selecione"}),v(c)]}),r.tipoMorador&&a.jsx("div",{className:"invalid-feedback",children:r.tipoMorador})]}),a.jsxs("div",{className:"col-3",children:[a.jsx("label",{htmlFor:"parentesco",className:"form-label",children:"Parentesco"}),a.jsxs("select",{className:`form-select ${r.parentesco?"is-invalid":""}`,id:"parentesco",value:e.parentesco,onChange:o=>l({...e,parentesco:parseInt(o.target.value)}),disabled:e.tipoMorador===c.TITULAR.value,children:[a.jsx("option",{value:null,children:"Selecione"}),v(I)]}),r.parentesco&&a.jsx("div",{className:"invalid-feedback",children:r.parentesco})]})]}),a.jsx("div",{className:"row",children:a.jsxs("div",{className:"col-3",children:[a.jsx("label",{htmlFor:"moradorId",className:"form-label",children:"Morador"}),a.jsxs("select",{className:`form-select ${r.idMorador?"is-invalid":""}`,id:"morador",value:e.idMorador,onChange:o=>l({...e,idMorador:parseInt(o.target.value)}),disabled:e.tipoMorador===c.TITULAR.value||e.parentesco===I.NaoPossui.value,children:[a.jsx("option",{value:null,children:"Selecione"}),b.map(o=>a.jsx("option",{value:o.id,children:o.nome},o.id))]}),r.idMorador&&a.jsx("div",{className:"invalid-feedback",children:r.idMorador})]})}),a.jsx("div",{className:"row",children:a.jsxs("div",{className:"col-12",children:[a.jsx("label",{htmlFor:"observacao",className:"form-label",children:"Observação"}),a.jsx("textarea",{className:"form-control",rows:"5",id:"observacao",value:e.observacao,onChange:o=>l({...e,observacao:o.target.value})})]})}),a.jsx("button",{type:"submit",className:"btn btn-primary mt-3",children:"Salvar"})]})]})};export{k as default};
