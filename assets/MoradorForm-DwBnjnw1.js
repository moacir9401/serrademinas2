import{q as S,r as n,A as I,p as _,j as a}from"./index-3AItk43U.js";import{p as O}from"./InputMask-C50z2ifw.js";import{s as p}from"./MoradorService-bRTo0Wr-.js";import{B as T,A as D}from"./BlocoService-ngkR802W.js";import{T as c}from"./TipoMoradorEnum-PsNxfakq.js";const F={FUNDAMENTAL_INCOMPLETO:{value:1,label:"Ensino Fundamental Incompleto"},FUNDAMENTAL_COMPLETO:{value:2,label:"Ensino Fundamental Completo"},MEDIO_INCOMPLETO:{value:3,label:"Ensino M�dio Incompleto"},MEDIO_COMPLETO:{value:4,label:"Ensino M�dio Completo"},SUPERIOR_INCOMPLETO:{value:5,label:"Ensino Superior Incompleto"},SUPERIOR_COMPLETO:{value:6,label:"Ensino Superior Completo"},POS_GRADUACAO:{value:7,label:"P�s-Gradua��o"},MESTRADO:{value:8,label:"Mestrado"},DOUTORADO:{value:9,label:"Doutorado"}},R={SOLTEIRO:{value:1,label:"Solteiro(a)"},CASADO:{value:2,label:"Casado(a)"},DIVORCIADO:{value:3,label:"Divorciado(a)"},VIUVO:{value:4,label:"Vi�vo(a)"},UNIAO_ESTAVEL:{value:5,label:"Uni�o Est�vel"}},P={PAI:{value:1,label:"Pai"},MAE:{value:2,label:"M�e"},FILHO:{value:3,label:"Filho(a)"},OUTRO:{value:4,label:"Outro"}};class w{constructor(m="",e="",l=null,r="",u="",h=null,N="",f=null,x=null,b=1,j="",M="",g=new Date,C="",A=1,E=1){this.Id=m,this.nome=e,this.tipoMorador=l,this.telefone=r,this.email=u,this.estadoCivil=h,this.profissao=N,this.parentesco=f,this.escolaridade=x,this.idMorador=b,this.rg=j,this.cpf=M,this.dataNascimento=g,this.observacao=C,this.idApartamento=A,this.idBloco=E}}const k=()=>{const{moradorId:i}=S(),m=n.useContext(I),[e,l]=n.useState(new w),[r,u]=n.useState({});n.useState(!1);const[h,N]=n.useState([]),[f,x]=n.useState([]),[b,j]=n.useState([]),M=_(),g=()=>{M(`/Veiculo/NovoCadastro/${i}`)};n.useEffect(()=>{async function o(){const s=await T.listarBloco(),t=await D.listarApartamento(),d=await p.listarMoradores();N(s),j(t),x(d)}if(o(),i){async function s(){try{const t=await p.lerMorador(i);t.dataNascimento&&(t.dataNascimento=new Date(t.dataNascimento),t.idMorador=14),l(t)}catch(t){console.error("Erro ao buscar morador:",t)}}s()}},[i]),e.tipoMorador===c.TITULAR.value&&(e.parentesco=0);const C=async o=>{o.preventDefault();const s={Id:e.id,nome:e.nome,tipoMorador:e.tipoMorador,telefone:e.telefone,email:e.email,estadoCivil:e.estadoCivil,profissao:e.profissao,parentesco:e.parentesco,escolaridade:e.escolaridade,idMorador:e.idMorador,rg:e.rg,cpf:e.cpf,dataNascimento:e.dataNascimento?e.dataNascimento.toISOString():"",observacao:e.observacao,idApartamento:e.idApartamento,idBloco:e.idBloco};u({});const t=A(s);if(Object.keys(t).length>0){u(t);return}try{if(i){const d=await p.atualizarMorador(i,s);m.addAlert("Ação Realizada com sucesso","success")}else{const d=await p.criarMorador(s);m.addAlert("Ação Realizada com sucesso","success"),E()}}catch(d){console.error("Erro ao criar morador:",d)}},A=o=>{const s={};return o.nome===""&&(s.nome='O campo "Nome" é obrigatório.'),e.tipoMorador===null&&(s.tipoMorador='O campo "Tipo Morador" é obrigatório".'),e.tipoMorador!=c.TITULAR.value&&e.parentesco===0&&(s.parentesco='O campo "parentesco" é obrigatório para moradores diferentes do tipo "Titular".'),e.tipoMorador!=c.TITULAR.value&&e.idMorador===0&&(s.idMorador='O campo "Morador" é obrigatório para moradores diferentes do tipo "Titular".'),s},E=()=>{l(morador)},v=o=>Object.keys(o).map(s=>a.jsx("option",{value:o[s].value,children:o[s].label},o[s].value));return a.jsxs("div",{className:"container",children:[a.jsx("h2",{children:"Criar Morador"}),i!==void 0&&a.jsx("button",{onClick:g,className:"btn btn-primary mt-3 mb-3",children:"Adicionar Veiculo"}),a.jsxs("form",{onSubmit:C,children:[a.jsxs("div",{className:"col-2",children:[a.jsx("label",{className:"form-label",children:"id"}),a.jsx("span",{id:"id",className:"form-control",children:e.id??0})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-4",children:[a.jsx("label",{htmlFor:"nome",className:"form-label",children:"Nome"}),a.jsx("input",{type:"text",className:`form-control ${r.nome?"is-invalid":""}`,id:"nome",value:e.nome,onChange:o=>l({...e,nome:o.target.value})}),r.nome&&a.jsx("div",{className:"invalid-feedback",children:r.nome})]}),a.jsxs("div",{className:"col-2",children:[a.jsx("label",{htmlFor:"dataNascimento",className:"form-label",children:"Data de Nascimento"}),a.jsx("input",{type:"date",id:"dataNascimento",name:"dataNascimento",value:e.dataNascimento?e.dataNascimento.toISOString().substring(0,10):"",onChange:o=>l({...e,dataNascimento:new Date(o.target.value)}),className:r.dataNascimento?"form-control is-invalid":"form-control"})]}),a.jsxs("div",{className:"col-2",children:[a.jsx("label",{htmlFor:"telefone",className:"form-label",children:"Telefone"}),a.jsx(O,{mask:"(__) _____-____",replacement:{_:/\d/},className:"form-control",id:"telefone",value:e.telefone,onChange:o=>l({...e,telefone:o.target.value})})]}),a.jsxs("div",{className:"col-4",children:[a.jsx("label",{htmlFor:"email",className:"form-label",children:"Email"}),a.jsx("input",{type:"email",className:"form-control",id:"email",value:e.email,onChange:o=>l({...e,email:o.target.value})})]})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-4",children:[a.jsx("label",{htmlFor:"escolaridade",className:"form-label",children:"Escolaridade"}),a.jsxs("select",{className:"form-select",id:"escolaridade",value:e.escolaridade,onChange:o=>l({...e,escolaridade:parseInt(o.target.value)}),children:[a.jsx("option",{value:null,children:"Selecione"}),v(F)]})]}),a.jsxs("div",{className:"col-2",children:[a.jsx("label",{htmlFor:"rg",className:"form-label",children:"RG"}),a.jsx("input",{type:"text",className:"form-control",id:"rg",value:e.rg,onChange:o=>l({...e,rg:o.target.value})})]}),a.jsxs("div",{className:"col-3",children:[a.jsx("label",{htmlFor:"cpf",className:"form-label",children:"CPF"}),a.jsx(O,{mask:"___.___.___-__",replacement:{_:/\d/},className:"form-control",id:"cpf",value:e.cpf,onChange:o=>l({...e,cpf:o.target.value})})]}),a.jsxs("div",{className:"col-3",children:[a.jsx("label",{htmlFor:"estadoCivil",className:"form-label",children:"Estado Civil"}),a.jsxs("select",{className:"form-select",id:"estadoCivil",value:e.estadoCivil,onChange:o=>l({...e,estadoCivil:parseInt(o.target.value)}),children:[a.jsx("option",{value:null,children:"Selecione"}),v(R)]})]})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-3",children:[a.jsx("label",{htmlFor:"profissao",className:"form-label",children:"Profissão"}),a.jsx("input",{type:"text",className:"form-control",id:"profissao",value:e.profissao,onChange:o=>l({...e,profissao:o.target.value})})]}),a.jsxs("div",{className:"col-2",children:[a.jsx("label",{htmlFor:"idBloco",required:!0,className:"form-label",children:"Bloco"}),a.jsxs("select",{className:"form-select",id:"idBloco",value:e.idBloco,onChange:o=>l({...e,idBloco:parseInt(o.target.value)}),children:[a.jsx("option",{value:null,children:"Selecione"}),h.map(o=>a.jsx("option",{value:o.id,children:o.nome},o.id))]})]}),a.jsxs("div",{className:"col-2",children:[a.jsx("label",{htmlFor:"idApartamento",required:!0,className:"form-label",children:"Apartamento"}),a.jsxs("select",{className:"form-select",id:"idApartamento",value:e.idApartamento,onChange:o=>l({...e,idApartamento:parseInt(o.target.value)}),children:[a.jsx("option",{value:null,children:"Selecione"}),b.map(o=>a.jsx("option",{value:o.id,children:o.nome},o.id))]})]}),a.jsxs("div",{className:"col-2",children:[a.jsx("label",{htmlFor:"tipoMorador",required:!0,className:"form-label",children:"Tipo de Morador"}),a.jsxs("select",{className:`form-select  ${r.tipoMorador?"is-invalid":""}`,id:"tipoMorador",value:e.tipoMorador,onChange:o=>l({...e,tipoMorador:parseInt(o.target.value)}),children:[a.jsx("option",{value:null,children:"Selecione"}),v(c)]}),r.tipoMorador&&a.jsx("div",{className:"invalid-feedback",children:r.tipoMorador})]}),a.jsxs("div",{className:"col-3",children:[a.jsx("label",{htmlFor:"parentesco",className:"form-label",children:"Parentesco"}),a.jsxs("select",{className:`form-select ${r.parentesco?"is-invalid":""}`,id:"parentesco",value:e.parentesco,onChange:o=>l({...e,parentesco:parseInt(o.target.value)}),disabled:e.tipoMorador===c.TITULAR.value,children:[a.jsx("option",{value:null,children:"Selecione"}),v(P)]}),r.parentesco&&a.jsx("div",{className:"invalid-feedback",children:r.parentesco})]})]}),a.jsx("div",{className:"row",children:a.jsxs("div",{className:"col-3",children:[a.jsx("label",{htmlFor:"moradorId",className:"form-label",children:"Morador"}),a.jsxs("select",{className:`form-select ${r.idMorador?"is-invalid":""}`,id:"morador",value:e.idMorador,onChange:o=>l({...e,idMorador:parseInt(o.target.value)}),disabled:e.tipoMorador===c.TITULAR.value,children:[a.jsx("option",{value:null,children:"Selecione"}),f.map(o=>a.jsx("option",{value:o.id,children:o.nome},o.id))]}),r.idMorador&&a.jsx("div",{className:"invalid-feedback",children:r.idMorador})]})}),a.jsx("div",{className:"row",children:a.jsxs("div",{className:"col-12",children:[a.jsx("label",{htmlFor:"observacao",className:"form-label",children:"Observação"}),a.jsx("textarea",{className:"form-control",rows:"5",id:"observacao",value:e.observacao,onChange:o=>l({...e,observacao:o.target.value})})]})}),a.jsx("button",{type:"submit",className:"btn btn-primary mt-3",children:"Salvar"})]})]})};export{k as default};
